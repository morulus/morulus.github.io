<!doctype html5>
<html>
  <head>
  	<title>Vladimir Kalmykov</title>
    <meta charset="utf-8">
  	<script src="bower_components/rxjs/dist/rx.all.min.js"></script>
    <script
    src="bower_components/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="bower_components/font-awesome/css/font-awesome.min.css" />

    <script src="bower_components/vendor/vendor.js" baseUrl="/"></script>
    <script src="bundle.js"></script>
  </head>
  <body>
    <div id="screens" data-dirty>
      <!--  -->
    </div>
    <div id="cover"></div>
  </body>
  <script>
    var uri = window.location.pathname.split('/')[1];
    const widget = new me.Widescreens(document.getElementById('screens'), {
      purview: true,
      easing: 'ease'
    });
    vendor('morulus/ScorePanel', function(ScorePanel) {
      var scorePanel = ReactDOM.render(React.createElement(ScorePanel, {
        store: widget
      }), document.getElementById("cover"));
    });

    window.widget = widget;
    widget.addScreen([4, 0], {
      html: '<article><div><h1>A long time ago in a galaxy far far away</h1></div></article>'
    });
    widget.addScreen([4, 1], {
      html: ''
    });
    widget.addScreen([4, 2], '/screens/start/start.js', true);
    widget.addScreen([4, 3], {
      html: ''
    });


    widget.addPage('portfolio', [4, 5], {
      html: '<article><div><h2>Portfolio</h2></div></article>'
    });

    widget.addPage('WeddingParty', [4, 6], '/screens/weddingparty/weddingparty.js');
    widget.addPage('SecondStep', [4, 4], '/screens/secondstep/secondstep.js');
    widget.addPage('Solomki', [5, 4], '/screens/solomki/solomki.js');
    widget.addScreen([4, 7, 0], {
      html: '<article><div><h2>Projects</h2></div></article>'
    });
    widget.addPage('Solomki4', [4, 8], '/screens/solomki/solomki.js');


    function handleUri(uri) {
      if (uri==='browser') {
        widget.togglePurview(true);
      } else {
        var currents = widget.select(function(s) {
          return "object"===typeof s && s.uri == uri;
        });
        if (currents.length>0) {
          widget.goto([currents[0].x, currents[0].y], true);
        } else {
          // 404
        }
      }
    }

    /**
     * Get location path
     */

    if (uri) {
      handleUri(uri);
    }

    /**
     * Listen for state
     */
    window.addEventListener('popstate', function(e) {
      var uri = window.location.pathname.split('/')[1];
      handleUri(uri);
    });


  </script>
</html>
